/* =========================================
   Tailwind layers
========================================= */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* =========================================
   Design tokens (CSS variables)
   - Light defaults auf :root
   - Dark overrides auf .dark
========================================= */
:root {
  /* Surface / Background */
  --bg: #f8fafc;
  /* page bg (light) */
  --panel: #ffffff;
  /* cards/panels (light) */
  --panel-border: #e5e7eb;
  /* slate-200 */
  --panel-shadow: 0 10px 25px rgba(2, 8, 23, .10), 0 2px 8px rgba(2, 8, 23, .06);

  /* Text */
  --ink: #0f172a;
  /* slate-900 */
  --ink-muted: #64748b;
  /* slate-500 */

  /* Brand (Forest palette) */
  --brand-500: #5C8374;
  --brand-600: #4d6e62;
  --brand-700: #3f5b51;

  /* Accents for borders & focus in light mode */
  --line: #cbd5e1;
  /* slate-300 */
}

html.dark {
  --bg: #040D12;
  /* forest-950 */
  --panel: #183D3D;
  /* forest-800-ish */
  --panel-border: #0f2a2a;
  /* subtle dark border */
  --panel-shadow: 0 14px 30px rgba(0, 0, 0, .35), 0 2px 10px rgba(0, 0, 0, .25);

  --ink: #e5e7eb;
  /* slate-200 */
  --ink-muted: rgba(255, 255, 255, .65);

  --brand-500: #5C8374;
  /* bleibt gleich */
  --brand-600: #6b9a89;
  --brand-700: #7fb2a0;

  --line: #294a4a;
}

/* First paint background to avoid white flash */
html,
body {
  background: var(--bg);
}

/* =========================================
   Base tweaks (typography, links, selection)
========================================= */
@layer base {
  body {
    @apply antialiased;
    color: var(--ink);
    background: var(--bg);
    font-feature-settings: "kern", "liga", "calt";
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    color: var(--ink);
  }

  a {
    color: var(--brand-600);
  }

  a:hover {
    color: var(--brand-700);
  }

  ::selection {
    background: color-mix(in srgb, var(--brand-600) 30%, transparent);
    color: #fff;
  }
}

/* =========================================
   Components
========================================= */
@layer components {

  /* --- Panels / Cards --- */
  .panel {
    background: var(--panel);
    color: var(--ink);
    border: 1px solid var(--panel-border);
    border-radius: 0.75rem;
    /* rounded-xl */
    box-shadow: var(--panel-shadow);
  }

  /* kleine Helfer-Variante: „flaches“ Panel (z.B. Stage-Header) */
  .panel-flat {
    background: var(--panel);
    color: var(--ink);
    border: 1px solid var(--panel-border);
    border-radius: 0.75rem;
  }

  /* --- Buttons --- */
  .btn {
    @apply inline-flex items-center justify-center gap-2 font-medium;
    padding: .55rem .9rem;
    border-radius: .625rem;
    color: #fff;
    background: var(--brand-600);
    border: 1px solid var(--brand-600);
    transition: transform .08s ease, background-color .18s ease, box-shadow .18s ease;
    box-shadow: 0 2px 8px rgba(2, 8, 23, .12);
  }

  .btn:hover {
    background: var(--brand-500);
  }

  .btn:active {
    transform: translateY(1px);
  }

  .btn-outline {
    @apply inline-flex items-center justify-center gap-2 font-medium;
    padding: .55rem .9rem;
    border-radius: .625rem;
    color: var(--ink);
    background: transparent;
    border: 1px solid var(--line);
    transition: background-color .18s ease, color .18s ease, border-color .18s ease;
  }

  .btn-outline:hover {
    background: color-mix(in srgb, var(--brand-600) 12%, transparent);
    color: var(--ink);
    border-color: color-mix(in srgb, var(--brand-600) 50%, var(--line));
  }

  /* --- Inputs / Selects / Textareas --- */
  .ui-input,
  .ui-select,
  .ui-textarea {
    width: 100%;
    border-radius: .75rem;
    border: 1px solid var(--line);
    background: #fff;
    /* IMMER weiß im Light Mode */
    color: #0f172a;
    padding: .6rem .9rem;
    transition: border-color .15s ease, box-shadow .15s ease, background-color .15s ease;
  }

  /* Dark-Mode: Felder ebenfalls dunkel, aber weiterhin kontrastreich */
  html.dark .ui-input,
  html.dark .ui-select,
  html.dark .ui-textarea {
    background: #0f1b1b;
    color: var(--ink);
    border-color: var(--panel-border);
  }

  .ui-input::placeholder,
  .ui-textarea::placeholder {
    color: #94a3b8;
    /* slate-400 */
  }

  .ui-input:focus,
  .ui-select:focus,
  .ui-textarea:focus {
    outline: none;
    border-color: var(--brand-600);
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--brand-600) 35%, transparent);
  }

  /* --- Muted text --- */
  .muted {
    color: var(--ink-muted);
  }

  /* --- Shadow helper (falls du es direkt nutzen willst) --- */
  .shadow-panel {
    box-shadow: var(--panel-shadow);
  }

  /* --- „Lift on hover“ für Deal-Karten --- */
  .lift-on-hover {
    will-change: transform;
    transition: transform .18s ease, box-shadow .2s ease, background-color .2s ease;
  }

  .lift-on-hover:hover {
    transform: translateY(-2px) scale(1.015);
    box-shadow: 0 14px 28px rgba(2, 8, 23, .18);
    background: color-mix(in srgb, var(--panel) 90%, var(--brand-600) 10%);
  }
}

/* =========================================
   Global form fallback (nur wenn kein .ui-* gesetzt)
   – hält Third-party Markup stabil
========================================= */
input[type="text"],
input[type="email"],
input[type="password"],
input[type="number"],
input[type="search"],
select,
textarea {
  background: #fff;
  color: #0f172a;
  border: 1px solid var(--line);
  border-radius: .75rem;
  padding: .6rem .9rem;
  width: 100%;
  font-size: .95rem;
  transition: border-color .15s ease, box-shadow .15s ease, background-color .15s ease;
}

html.dark input[type="text"],
html.dark input[type="email"],
html.dark input[type="password"],
html.dark input[type="number"],
html.dark input[type="search"],
html.dark select,
html.dark textarea {
  background: #0f1b1b;
  color: var(--ink);
  border-color: var(--panel-border);
}

input:focus,
select:focus,
textarea:focus {
  outline: none;
  border-color: var(--brand-600);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--brand-600) 35%, transparent);
}

/* =========================================
   Buttons (fallback für nacktes <button>)
========================================= */
button {
  background: var(--brand-600);
  color: #fff;
  border: 1px solid var(--brand-600);
  border-radius: .625rem;
  padding: .55rem .9rem;
  font-weight: 600;
  cursor: pointer;
  transition: background-color .18s ease, transform .08s ease;
}

button:hover {
  background: var(--brand-500);
}

button:active {
  transform: translateY(1px);
}